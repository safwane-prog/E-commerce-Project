{% extends 'base.html' %}
{% load static %}
{% block title %}My Account{% endblock %}

{% block content %}

<link rel="stylesheet" href="\static\css\profile.css">
<div class="container" role="main">
    <div class="loading-spinner" id="loading-spinner"></div>
    <aside class="sidebar" aria-label="User Navigation">
        <div class="profile-info">
            <div class="profile-picture">
                <img id="profile-picture" src="/static/imges/user_Placeholder.png" alt="Profile Picture">
            </div>
            <div class="user-details">
                <div id="user-name" class="user-name">John Doe</div>
                <div id="user-email" class="user-email">john.doe@example.com</div>
            </div>
        </div>
        <nav>
            <ul class="nav-list">
                <li><a href="#" class="nav-link active" data-section="dashboard" aria-current="page"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="#" class="nav-link" data-section="profile"><i class="fas fa-user"></i> Profile</a></li>
                <li><a href="#" class="nav-link" data-section="orders"><i class="fas fa-box"></i> Orders</a></li>
                <li><a href="#" class="nav-link" data-section="wishlist"><i class="fas fa-heart"></i> Wishlist</a></li>
                <li><a href="#" class="nav-link" data-section="messages"><i class="fas fa-envelope"></i> Messages</a></li>
            </ul>
        </nav>
        <button class="logout-btn" onclick="logout()" aria-label="Logout">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>
    </aside>

    <main class="main-content">
        <section id="dashboard" class="content-section active" aria-labelledby="dashboard-title">
            <h2 id="dashboard-title" class="section-title">Dashboard</h2>
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <i class="fas fa-box"></i>
                    <h3 id="total-orders">0</h3>
                    <p>Total Orders</p>
                </div>
                <div class="dashboard-card">
                    <i class="fas fa-heart"></i>
                    <h3 id="wishlist-items">0</h3>
                    <p>Wishlist Items</p>
                </div>
                <div class="dashboard-card">
                    <i class="fas fa-envelope"></i>
                    <h3 id="messages-count">0</h3>
                    <p>Messages</p>
                </div>
                <div class="dashboard-card">
                    <i class="fas fa-dollar-sign"></i>
                    <h3 id="total-spent">$0</h3>
                    <p>Total Spent</p>
                </div>
            </div>
            <div class="recent-activity">
                <h3>Recent Activity</h3>
                <div id="recent-orders" class="space-y-4"></div>
            </div>
        </section>

        <section id="profile" class="content-section" aria-labelledby="profile-title">
            <h2 id="profile-title" class="section-title">My Profile</h2>
            <form id="profile-form" class="profile-form" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="profile-picture-upload">Profile Picture</label>
                    <input type="file" id="profile-picture-upload" name="profile_picture" accept="image/*" aria-describedby="profile-picture-help">
                    <small id="profile-picture-help" class="form-text">Upload a new profile picture (optional).</small>
                </div>
                <div class="form-group">
                    <label for="firstName">First Name</label>
                    <input type="text" id="firstName" name="first_name" value="" aria-required="true">
                </div>
                <div class="form-group">
                    <label for="lastName">Last Name</label>
                    <input type="text" id="lastName" name="last_name" value="" aria-required="true">
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" value="" required aria-required="true">
                </div>
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" name="phone" value="">
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" name="address" value="">
                </div>
                <div class="form-group">
                    <label for="city">City</label>
                    <input type="text" id="city" name="city" value="">
                </div>
                <div class="form-group">
                    <label for="country">Country</label>
                    <input type="text" id="country" name="country" value="">
                </div>
                <button type="submit" class="submit-btn">Save Changes</button>
            </form>
        </section>

        <section id="orders" class="content-section" aria-labelledby="orders-title">
            <h2 id="orders-title" class="section-title">My Orders</h2>
            <div id="orders-list" class="orders-list"></div>
        </section>

        <section id="wishlist" class="content-section" aria-labelledby="wishlist-title">
            <h2 id="wishlist-title" class="section-title">My Wishlist</h2>
            <div id="wishlist-grid" class="wishlist-grid"></div>
        </section>

        <section id="messages" class="content-section" aria-labelledby="messages-title">
            <h2 id="messages-title" class="section-title">My Messages</h2>
            <div id="messages-list" class="messages-list"></div>
        </section>
    </main>
</div>

<div id="rating-modal" class="modal" role="dialog" aria-labelledby="rating-product-title" aria-hidden="true">
    <div class="modal-content">
        <span class="close-modal" onclick="closeRatingModal()" aria-label="Close">×</span>
        <h3 id="rating-product-title">Rate Product</h3>
        <form id="rating-form">
            <div class="form-group">
                <label for="rating-value">Rating</label>
                <div class="star-rating" id="star-rating" role="radiogroup" aria-label="Star Rating">
                    <span class="star" data-rating="1" role="radio" aria-label="1 star" tabindex="0">★</span>
                    <span class="star" data-rating="2" role="radio" aria-label="2 stars" tabindex="0">★</span>
                    <span class="star" data-rating="3" role="radio" aria-label="3 stars" tabindex="0">★</span>
                    <span class="star" data-rating="4" role="radio" aria-label="4 stars" tabindex="0">★</span>
                    <span class="star" data-rating="5" role="radio" aria-label="5 stars" tabindex="0">★</span>
                </div>
                <input type="hidden" id="rating-value" value="0">
                <input type="hidden" id="product-id" value="">
            </div>
            <div class="form-group">
                <label for="review-comment">Comment</label>
                <textarea id="review-comment" rows="5" placeholder="Write your comment here..." required aria-required="true"></textarea>
            </div>
            <div class="form-actions">
                <button type="button" onclick="closeRatingModal()" class="cancel-btn">Cancel</button>
                <button type="submit" class="submit-btn">Submit Review</button>
            </div>
        </form>
    </div>
</div>

<script>
    // Global variables
    const mainDomain = "{{ main_domin|escapejs }}";
    const currencySymbol = "{{ currency|escapejs }}";
</script>
<script src="\static\js\profile.js"></script>
{% endblock %}