{% extends 'base.html' %}
{% load static %}
{% block title %}Electronics & Gadgets{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/shop.css' %}">

<div class="all-category">
    <h1>Electronics & Gadgets</h1>
    <div class="category-grid">
        {% for category in categorys %}
            <div class="category-item" data-category-id="{{ category.id }}">
                <div class="category-img">
                    {% if category.image %}
                        <img src="{{ category.image.url }}" alt="{{ category.name }}">
                    {% else %}
                        <img src="{% static 'imges/istockphoto-1147544807-612x612.jpg' %}" alt="Default category image">
                    {% endif %}
                </div>
                <div class="category-name">
                    {{ category.name }}
                </div>
            </div>
        {% endfor %}
    </div>
</div>

<div class="product-container">
    <div class="filter-section">
        <div class="filter-title">
            <div>Filter</div>
            <div><img src="{% static 'imges/Frame.svg' %}" alt="Filter icon"></div>
        </div>
        
        <!-- Category Filter -->
        <div class="filter-group">
            <div class="filter-header">
                <span>Categories</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-up" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M1.646 10.854a.5.5 0 0 0 .708 0L8 5.207l5.646 5.647a.5.5 0 0 0 .708-.708l-6-6a.5.5 0 0 0-.708 0l-6 6a.5.5 0 0 0 0 .708z"/>
                </svg>
            </div>
            <div class="filter-body">
                {% for category in categorys %}
                    <div class="filter-item">
                        <input type="checkbox" 
                               name="category" 
                               id="category_{{ category.id }}" 
                               value="{{ category.id }}"
                               class="category-checkbox">
                        <label for="category_{{ category.id }}">{{ category.name }}</label>
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Price Filter -->
        <div class="price-filter">
            <div class="price-title">
                <div class="price">Price</div>
                <div class="price-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-up" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1.646 10.854a.5.5 0 0 0 .708 0L8 5.207l5.646 5.647a.5.5 0 0 0 .708-.708l-6-6a.5.5 0 0 0-.708 0l-6 6a.5.5 0 0 0 0 .708z"/>
                    </svg>
                </div>
            </div>

            <div class="price-body">
                <div class="price-range-container">
                    <div id="main-price-black-range">
                        <div class="price-range">
                            <div class="range-fill"></div>
                            <div id="price-range-left" class="handle"></div>
                            <div id="price-range-right" class="handle"></div>
                        </div>
                    </div>
                </div>

                <div class="price-values">
                    <div class="price-values-input">
                        <span>From</span>
                        <input type="number" id="min-price" value="0" min="0" max="10000">
                    </div>
                    <div class="price-values-input">
                        <span>To</span>
                        <input type="number" id="max-price" value="10000" min="0" max="10000">
                    </div>
                </div>
            </div>
        </div>

        <!-- Options Filter -->
        <div class="option-filter-section">
            <div class="option-filter-head">
                <span>Options</span>
                <span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-up" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1.646 10.854a.5.5 0 0 0 .708 0L8 5.207l5.646 5.647a.5.5 0 0 0 .708-.708l-6-6a.5.5 0 0 0-.708 0l-6 6a.5.5 0 0 0 0 .708z"/>
                    </svg>
                </span>
            </div>
            <div class="option-filter-body">
                {% for option in options %}
                    <div class="option-filter-body-input">
                        <input type="checkbox" 
                               id="option_{{ option.id }}" 
                               name="option" 
                               value="{{ option.id }}"
                               class="option-checkbox">
                        <label for="option_{{ option.id }}">{{ option.name }}</label>
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Filter Buttons -->
        <div class="filter-buttons">
            <button id="apply-filter-btn" type="button">Apply</button>
            <button id="reset-filter-btn" type="button">Reset</button>
        </div>
    </div>

    <div class="all-products-section">
        <!-- Loading Indicator -->
        <div id="loading-indicator" class="loading-indicator" style="display: none;">
            <div class="spinner"></div>
            <p>Loading products...</p>
        </div>

        <!-- Products Section -->
        <div id="product-section" class="product-section">
            <!-- Products will be rendered here -->
        </div>

        <!-- Pagination Section -->
        <div class="pagination-section">
            <div class="pagination-btn">
                <button id="prev-btn" disabled>
                    <span>Previous</span>
                    <span><i class="bi bi-arrow-left-short"></i></span>
                </button>
            </div>
            <div id="pagination-numbers" class="pagination-button">
                <!-- Page numbers will be generated here -->
            </div>
            <div class="pagination-btn">
                <button id="next-btn">
                    <span><i class="bi bi-arrow-right-short"></i></span>
                    <span>Next</span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Product Modal (optional) -->
<div id="product-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close">&times;</span>
        <div id="modal-body">
            <!-- Product details will be loaded here -->
        </div>
    </div>
</div>
<script>
    // Global variables
    const mainDomain = "{{ main_domin|escapejs }}";
    const currencySymbol = "{{ currency|escapejs }}";
    
    // Configuration
    const ITEMS_PER_PAGE = 12;
    let currentPage = 1;
    let totalPages = 1;
    let isLoading = false;
</script>
<script src="{% static 'js/shop.js' %}"></script>
{% endblock %}